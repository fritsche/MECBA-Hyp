#!/bin/bash

cd ../..

instance=$(echo $1 | grep -oP "/home/gian/Documents/MECBA-Hyp/irace/Instances/\K.*")
IFS='@' read -a array <<< "$instance"
problem=${array[0]}
objectives=${array[1]}

#function="MultiArmedBandit"
function="ChoiceFunction"

candidate=$2

alpha=1.0
beta=$3

w=12000
c=7

evaluations=60000
population=300
crossover=0.95
mutation=0.02
executions=1
path="experiment/"
cfpath=$candidate$path

echo java -cp dist/MECBA-Hyp.jar hyperheuristics.main.NSGAIIHyperheuristicMain $population $evaluations $crossover $mutation $alpha $beta TwoPointsCrossover,MultiMaskCrossover,PMXCrossover SwapMutation,SimpleInsertionMutation $problem $function $w $c $objectives false $executions $cfpath false # 1> teste.out 2> teste.out
echo java -cp dist/MECBA-Hyp.jar hyperheuristics.main.CompareHypervolumes $executions $cfpath $path $cfpath $problem

aux="objectives/HYPERVOLUMES.txt"
output=$cfpath$objectives$aux
mecba=$(cat $output | grep -oP "MECBA PFknown: \K.*")
mab=$(cat $output | grep -oP "MultiArmedBandit PFknown: \K.*")
cf=$(cat $output | grep -oP "ChoiceFunction PFknown: \K.*")

# EH MINIMIZACAO
echo Best $((mecba-cf))
